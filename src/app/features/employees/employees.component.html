<section class="container">
  <h2 class="title">Empleados</h2>

  <div class="l-flex l-flex--row" style="gap: var(--space-3); align-items:center; margin-bottom: var(--space-4);">
    <input class="f-input" type="search" placeholder="Buscar por nombre, email o rol…"
           (input)="q.set($any($event.target).value)" />
    <button class="btn" (click)="create()">Nuevo empleado</button>
  </div>

  <div class="c-card">
    <div class="c-card__body">
      <table class="t-table">
        <thead>
          <tr>
            <th>Nombre</th>
            <th>Email</th>
            <th>Rol</th>
            <th class="t-table__actions">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let e of filtered()" (click)="open(e)">
  <td>{{ e.fullName }}</td>
  <td>{{ e.email || '—' }}</td>
  <td>{{ e.role || '—' }}</td>
  <td class="t-table__actions">
    <button class="btn btn--outline" (click)="edit(e, $event)">Editar</button>
    <button class="btn btn--danger-ghost btn--icon btn--round"
        (click)="askDelete(e, $event)" aria-label="Eliminar empleado">
  <!-- mismo SVG -->
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
       stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
    <polyline points="3 6 5 6 21 6"></polyline>
    <path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"></path>
    <path d="M10 11v6"></path>
    <path d="M14 11v6"></path>
    <path d="M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"></path>
  </svg>
</button>

  </td>
</tr>

          <tr *ngIf="filtered().length === 0">
            <td colspan="4" style="opacity:.7; padding:1.2rem;">No hay empleados.</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>

<app-confirm-dialog
  *ngIf="confirmOpen()"
  [title]="'Eliminar empleado'"
  [message]="'¿Seguro que quieres eliminar «' + (toDelete()?.fullName || '') + '»?'"
  [confirmText]="'Eliminar'"
  [cancelText]="'Cancelar'"
  (confirm)="confirmDelete()"
  (cancel)="cancelDelete()"
></app-confirm-dialog>
